# 모나드 이해하기

* 모나드는 수학의 '카테고리 이론' 이라는 분야에서 사용되는 용어입니다.
일종의 코드 설계 패턴으로 몇 개의 인터페이스를 구현한 클래스 입니다.
모나드 클래스는 몇 가지 공통적인 특징이 있습니다.


* 타입 클래스란?

모나드를 이해하는 첫것걸음은 타입 클래스(type class)가 왜 필요한지 아는 것입니다.

다음 2차 고차 함수 callMap은 두 번쨰 고차 매개변수 b개 map이라는 메서드를 가졌다는
가정으로 구현되었습니다.

const callMap = fn => b => b.map(fn)

따라서 다음과 같은 코드는 정상으로 실행 됩니다.
CallMap(a => a + 1)([1])

하지만 다음과 같은 코드는 비정상 종료 됩니다.

callMap(a => a + 1)(1)

이를 방지하려면 다음처럼 매개변수 b는 반드시 map 메서드가 있는 타입이라고 타입을 제한해야 합니다.

const calMap = <T, U>(fn: (T) => U) => <T extends {map(fn)}>(b: T) => b.map(fn)

여기까지가 10장까지 했던 내용입니다.

그런데 하스켈(haskell)언어는 발상의 전환을 했습니다.
보통 객체지향 언어라면 Number라는 클래스를 만들고 map이라는 메서드를 구현하는 식으로
설계하겠지만,

모나드 방식 설계는 방식 설계는
반드시 map과 of라는 이름의 메서드가 있는 Monad<T>클래스를 만듭니다.

class Monad<T> {
    constructor(public value: T) {}
    static of<U>(value: U): Monad<U> { return new Monad<U>}...
    Map<U>...
}

이런 클래스를 타입 클래스라고 합니다.
이런 클래스를 만들어 놓으면 타입에 따른 안정성을 보장하면서도
코드의 재사용성이 뛰어난 범용함수를 쉽게 만들 수 있습니다. ㅇㅗㅇ


하스켈은 대체 어떤 언어일까?...

아무튼 이런 모나드를 직접 구현해보겠습니다.

